@model IEnumerable<PawsHome.Models.Dog>

@{
    ViewBag.Title = "Budget";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    h2 {
        text-align: center;
        margin-bottom:60px;
        margin-top:60px;
    }

    h3 {
        text-align: center;
    }

    p {
        font-size: large;
        font-style: italic;
    }

    .img-rounded {
        width: 100%;
        height: 82%;
        max-width:350px;
    }

    .costype {
        width: 20%;
        height: 20%;
    }

    .banner {
        text-align: center;
    }

    input, select, textarea {
        width:100%;
        max-width:350px;
        height:30px;
    }

    .tab-content {
        padding:10px;   
    }

    #back {
        position: fixed;
        right: 10px;
        bottom: 40px;
        cursor: pointer;
        display: none;
    }
</style>

<a name="top"></a>
<div class="container body-content">
    <h1>Ownership Budget</h1>
    <hr />
    <h2>Select a breed to see how much it might cost</h2>
    <div class="row" style="margin-bottom:60px">
        <div id="part1" class="col-md-4 col-sm-6">
            <div>@Html.DropDownList("Breeds", (IEnumerable<SelectListItem>)ViewBag.Breeds, "----Select----", new { @id = "drop" })</div>
            <img class="img-rounded" id="dogpic" />
        </div>
        <div id="part2" class="col-md-4 col-sm-6">

            <ul class="nav nav-pills" role="tablist">
                <li role="presentation" class="active"><a href="#annual" role="tab" data-toggle="tab">Annual Cost</a></li>
                <li role="presentation"><a href="#onetime" role="tab" data-toggle="tab">One-time Cost</a></li>
                <li role="presentation"><a href="#time" role="tab" data-toggle="tab">Lifetime Cost</a></li>
            </ul>


            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="annual">
                    <table class="table table-condensed">
                        <thead>
                            <tr>
                                <th>Activity</th>
                                <th>Cost (AUD)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Food</td>
                                <td id="a0"></td>
                            </tr>
                            <tr>
                                <td>Vet Care</td>
                                <td id="a1"></td>
                            </tr>
                            <tr>
                                <td>Health Products</td>
                                <td id="a2"></td>
                            </tr>
                            <tr>
                                <td>License</td>
                                <td id="a3"></td>
                            </tr>
                            <tr>
                                <td>Grooming</td>
                                <td id="a4"></td>
                            </tr>
                            <tr>
                                <td>Accessories</td>
                                <td id="a5"></td>
                            </tr>
                        </tbody>
                        <thead>
                            <tr>
                                <th>Total</th>
                                <th id="a6"></th>
                            </tr>
                        </thead>
                    </table>
                </div>


                <div role="tabpanel" class="tab-pane" id="onetime">
                    <table class="table table-condensed">
                        <thead>
                            <tr>
                                <th>Activity</th>
                                <th>Cost (AUD)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Training</td>
                                <td id="o0"></td>
                            </tr>
                            <tr>
                                <td>Bedding</td>
                                <td id="o1"></td>
                            </tr>
                            <tr>
                                <td>Vaccination (C5)</td>
                                <td id="o2"></td>
                            </tr>
                            <tr>
                                <td>Check-up</td>
                                <td id="o3"></td>
                            </tr>
                            <tr>
                                <td>Leash & Collar</td>
                                <td id="o4"></td>
                            </tr>
                            <tr>
                                <td>Desexing</td>
                                <td id="o5"></td>
                            </tr>
                        </tbody>
                        <thead>
                            <tr>
                                <th>Total</th>
                                <th id="o6"></th>
                            </tr>
                        </thead>
                    </table>
                </div>


                <div role="tabpanel" class="tab-pane" id="time">
                    <table class="table table-condensed">
                        <thead>
                            <tr>
                                <th>Total</th>
                                <th id="lt"></th>
                            </tr>
                        </thead>
                    </table>
                </div>

            </div>
        </div>
        
        <div class="col-md-4" id="part3">
        </div>

    </div>
</div>

<div class="row" style="background-color:lavender">
    <h3>Where does owners' money go?</h3>
    <div class="banner col-sm-6">
        <img class="costype" src="https://image.flaticon.com/icons/svg/138/138279.svg" />
        <p>One-time Cost</p>
    </div>
    <div class="banner col-sm-6">
        <img class="costype" src="https://image.flaticon.com/icons/svg/138/138349.svg" />
        <p>Ongoing Cost</p>
    </div>
</div>

<div class="row">
    <div class="banner col-sm-6">
        <h3>One-time Cost</h3>
        <p style="text-align: justify;padding:5%">
            Owning dogs can be expensive.. They are many costs involved. Up front cost is one among them, where you
            have to spend money to own a dog, with it comes costs of vaccination, micro chipping, desexing etc.
            Besides that you will also need to buy accessories for making the dog comfortable at home.
        </p>
    </div>
    <div class="banner col-sm-6">
        <img class="costype" style="margin:10%" src="https://image.flaticon.com/icons/svg/1494/1494372.svg" />
    </div>
</div>

<div class="row" style="background-color:lavender">
    <div class="banner col-sm-6">
        <img class="costype" style="margin:10%" src="https://image.flaticon.com/icons/svg/1494/1494344.svg" />
    </div>
    <div class="banner col-sm-6">
        <h3>Ongoing Cost</h3>
        <p style="text-align: justify; padding:5%">
            Apart from one-time cost you also need to be prepared for on-going costs associated with food, vet bills,
            training, toys etc. The cost of pet ownership depends on the breed you choose and remember that pets
            are expensive addition to the family.
        </p>
    </div>
</div>

<a id="back" class="button button-glow button-circle button-primary" href="#top" style="float:right">
    <span class="glyphicon glyphicon-arrow-up"></span>
</a>

@section Scripts{
    <script type="text/javascript">
     //display estimated cost
        $(document).ready(function () {
            //check access approach
            if (@ViewData["selected"] != -1) {
                document.getElementById("drop").value = @ViewData["selected"];
                showBudget($("#drop").val());
            }

            //listen dropdown list change
            $("#drop").change(function (evt) {
                showBudget($("#drop").val());
            });

            resizePart()
            $(window).resize(function (evt) {
                resizePart()
            });

            $(window).scroll(function () {
                if ($(window).scrollTop() > 500) {
                    $("#back").fadeIn(300);
                }
                else {
                    $("#back").fadeOut(200);
                }

            });

            $("#back").mouseover(function (evt) {
                document.getElementById("back").innerHTML = "top";
            });

            $("#back").mouseout(function (evt) {
                document.getElementById("back").innerHTML = "<span class=\"glyphicon glyphicon-arrow-up\"></span>";
            });
        });

        function resizePart() {
            var p2 = document.getElementById("part2");
            var p1 = document.getElementById("part1");
            var height = p2.clientHeight;
            if (parseInt(height) > 200)
                p1.style.height = parseInt(height) + "px";
        }

        function showBudget(id) {
            if (id != 0) {
                @foreach (var item in Model)
                {<text>
                if (id == @item.id) {

                    //set dog picture
                    document.getElementById("dogpic").src = "@item.url";

                    //set annual cost
                    var atemp = parseInt(@item.cost * 12);
                    document.getElementById("a0").innerHTML = parseInt(atemp * 0.38);
                    document.getElementById("a1").innerHTML = parseInt(atemp * 0.22);
                    document.getElementById("a2").innerHTML = parseInt(atemp * 0.18);
                    document.getElementById("a3").innerHTML = 180;
                    document.getElementById("a4").innerHTML = parseInt(atemp * 0.12);
                    document.getElementById("a5").innerHTML = parseInt(atemp * 0.08);
                    var annual = parseInt(atemp * 0.4) + parseInt(atemp * 0.28) + 180 + parseInt(atemp * 0.3);
                    document.getElementById("a6").innerHTML = annual;


                    //set one time cost
                    var otemp = @item.onetime;
                    document.getElementById("o0").innerHTML = parseInt(otemp * 0.15);
                    document.getElementById("o1").innerHTML = parseInt(otemp * 0.1);
                    document.getElementById("o2").innerHTML = 130;
                    document.getElementById("o3").innerHTML = parseInt(otemp * 0.3);
                    document.getElementById("o4").innerHTML = parseInt(otemp * 0.05);
                    document.getElementById("o5").innerHTML = parseInt(otemp * 0.4);
                    var onetime = 130 + otemp;
                    document.getElementById("o6").innerHTML = onetime;

                    //set lifetime cost
                    document.getElementById("lt").innerHTML = parseInt(annual * @item.life + onetime) + " AUD";

                    //set chart
                    Chart.defaults.global.legend.display = false;
                    document.getElementById("part3").innerHTML = "<canvas id=myChart width=350 height=300></canvas>";
                    new Chart(document.getElementById("myChart"),
                        {
                            "type": "bar",
                            "data":
                            {
                                "labels": ["Annaul Cost", "One-time Cost"],
                                "datasets": [
                                    {
                                        "label": null,
                                        "data": [annual, onetime],
                                        "fill": false,
                                        "backgroundColor": ["rgba(255, 99, 132, 0.2)", "rgba(255, 159, 64, 0.2)"],
                                        "borderColor": ["rgb(255, 99, 132)", "rgb(255, 159, 64)"],
                                        "borderWidth": 1
                                    }]
                            },
                            "options":
                            {
                                "scales":
                                {
                                    "yAxes": [
                                        {
                                            "ticks": {
                                                "beginAtZero": true, min: 0, max: 3500, stepSize: 500
                                            }
                                        }]
                                }
                            }
                        });


                }
                </text>}
            }

            //if nothing selected, erase info
            else {
                document.getElementById("dogpic").src = "";

                for (var i = 0; i < 7; i++) {
                    document.getElementById("a" + i).innerHTML = "";
                }

                for (var i = 0; i < 7; i++) {
                    document.getElementById("o" + i).innerHTML = "";
                }

                document.getElementById("lt").innerHTML = "";

                document.getElementById("part3").innerHTML = "";
            }
        }
    </script>
}